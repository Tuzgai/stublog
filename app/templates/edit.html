{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
<section class="container">
    <h2>Edit Post</h2>
    <p>
        Posts are formatted as markdown, <a href="https://daringfireball.net/projects/markdown/syntax">Markdown details</a>.
    </p>
    <div class="row">
        <div class="col-md-8">
            <form class="form" action ="" method="post">
                {{ form.hidden_tag() }}
                {{ wtf.form_errors(form, hiddens="only") }}
                {{ wtf.form_field(form.title) }}
                {% for error in form.title.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
                {{ wtf.form_field(form.body, rows=25, cols=100) }}
                <p>{{ wtf.form_field(form.submit) }}</p>
                {% for error in form.body.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </form>
        </div>
    </div>
    <a class="btn btn-default" 
       style="background-color:lightcoral; margin-top:5em;" 
       href=""
       onclick="deletePost(); return false;">
        DELETE POST
    </a>
</section>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
        function deletePost() {
            if (confirm('Are you sure you want to delete this post?')) {
                window.location.replace("{{ url_for('main.delete_post', post=post.id, confirm=True) }}");
                return true;
            }
        }
    </script>
{% endblock %}